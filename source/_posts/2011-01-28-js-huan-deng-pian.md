--- 
categories: 
  - JavaScript
comments: true
layout: post
published: true
status: publish
tags: 
  - foreach
  - href
  - News
  - php
  - seo
  - User
  - 新闻
title: JS幻灯片
type: post
---
<div>      <div class="page_content_right"><br>         <?php if ( $this->news_info ):<br>            $news_list_foreach = $this->news_info;<!--more--><br>            $tmp = $img_list_foreach = array_slice($news_list_foreach, 0, 3);<br><div> </div>            foreach ( $news_list_foreach as $k =>$_news_item)<br>            {<br>                switch ($_news_item['type'])<br>                {<br>                    case 0:<br>                        $news_list_foreach[$k]['title'] = '【新闻】' . $_news_item['title'];<br>                        break;<br>                    case 1:<br>                        $news_list_foreach[$k]['title'] = '【活动】' . $_news_item['title'];<br>                        break;<br>                }<br>            }<br><div> </div>            $main_img = array_shift($tmp);<br>            $main_news = array_shift($news_list_foreach);<br>         ?><br>         <div class="page_content_right_title"><br>            <h2>品牌动态</h2><br>            <p><a target="_blank" href="<?=$this->Url_Brand_News_List($this->brand_info)?>">+更多</a></p><br>         </div><br>         <script>//<font color="#00ff00"><font color="#ff00ff">JS部分特效开始</font><br></font><?php<br>//http://pp.beta.iyaya.com/brand/news.php?nid=48252&action=detail<br>?><br>         function a($img, i)<br>         {<br>             var img_src = $img.attr('src'), cid = i + 1;<br><div> </div>             $("#main_image").attr('src', img_src.replace(/80x60/g, "300x192"));//<font color="#ff00ff">ID值为main_image的项：$("#main_image")  attr()，如果有一个参数，就是取返回值，有2个参数就是进行替换。<br></font>             $("#img_tip").attr('class', 'sanjiao_0' + cid);<br><div> </div>             href = $("#" + 'sanjiao_0' + cid).attr('href');//<font color="#ff00ff">取得链接地址<br></font>             $("#main_url").attr('href',href);//<font color="#ff00ff">替换掉原先空间的href属性<br></font>         }<br><div> </div>             $(document).ready(function() {<br>                 var c = 0, status = 1;<br><div> </div>                 $.extend({<br>                       show:function() {<br><div> </div>                        $("#img_list").find('img').each(function(i) {<br>                            if ( c >= $("#img_list").find('img').length)<br>                            {<br>                                c = 0;<br>                            }<br><div> </div>                            if ( c == i && status ==1 )<br>                            {<br>                                a($(this), i);<br>                                c++;<br>                                return false;<br>                            }<br>                        });<br>                       }<br>                    });<br>                    setInterval("$.show()",3000);<br><div> </div>
<div> </div>                 $(".news_image_list").mouseover(function(){<br>                     var img_src = $(this).attr('src'),<br>                     cname = $(this).attr('name');<br><div> </div>                     href = $("#"+cname).attr('href');<br>                     $("#main_image").attr('src', img_src.replace(/80x60/g, "300x192"));<br>                     $("#main_url").attr('href', href);<br>                     $("#img_tip").attr('class', cname);<br><div> </div>                     status = 0;<br>                });<br><div> </div>                 $(".news_image_list").mouseout(function() {<br>                     status = 1;<br>                 });<br>             });<br>         </script><br>         <div class="page_content_right_hd"><br>            <div class="page_hd_banner"><br>            <?php echo "<!--";echo (var_dump($main_img));echo "-->"; ?><br>                 <ul class="page_hd_banner_big"><a id="main_url" href="<?=$this->Url_Brand_News($main_img)?>" target="_blank"><img id="main_image" src="<?=$this->Logo_News($main_img, '300x192')?>" width="300" height="192"/></a></ul><br>                 <ul class="page_hd_banner_small"><br>                 <div id="img_tip" class="sanjiao_01"><img src="/images/pp_sj.gif"/></div><br>                 <div id="img_list"><br>                <?php $i = 0; foreach ($img_list_foreach as $_item) : $i++;?><br>                <a id="sanjiao_0<?=$i?>" href="<?=$this->Url_Brand_News($_item)?>" target="_blank"><img class="news_image_list" name="sanjiao_0<?=$i?>" src="<?=$this->Logo_News($_item, '80x60')?>"/></a><br>                <?php endforeach;?><br>                </div><br>                 </ul><br>            </div><br>            <div class="page_news"><br><div> </div>                <ul><br>                <p><a target="_blank" href="<?=$this->Url_Brand_News($main_news)?>"><?=$main_news['title']?></a></p><br>                <span><?=$main_news['description']?></span><br>                </ul><br>                <?php if ( $news_list_foreach ) : ?><br>                <ul><br>                    <?php foreach ($news_list_foreach as $_item) :?><br>                    <li><a target="_blank" href="<?=$this->Url_Brand_News($_item)?>"><?=$_item['title']?></a></li><br>                    <?php endforeach; ?><br>                </ul><br>                <?php endif; ?><br>            </div><br>         </div><br>         <?php endif; ?><br><div> </div>        <?php if ( false ) : ?><br>         <div class="page_content_right_title"><br>            <h2>最新口碑</h2><br>            <p><a target="_blank" href="<?=$this->Url_Brand_Rate($this->brand_info, true)?>">+更多</a></p><br>         </div><br>         <div class="page_koubei"><br>            <?php if ( count($this->brand_rate) ) : ?><br><div> </div>            <?php if ( count($this->brand_rate) > 2 ) : $chunks = array_chunk($this->brand_rate, 2); ?><br>            <?php foreach ($chunks as $chunk) : ?><br>            <ul><br>                <?php foreach ($chunk as $_item) : ?><br>               <li><br>                    <a href="<?=$this->Url_Product($_item)?>" target="_blank"><img height="70" width="70" src="<?=$this->Logo_Product($_item, '100x100')?>"></a><br>                    <p><span class="title"><a href="<?=$this->Url_User($_item)?>"><?=$_item['userparent_nickname']?></a></span>评论了：<br><span class="chanpin"><a href="<?=$this->Url_Product($_item)?>" target="_blank"><?=$_item['product_title']?></a></span><br><?=$_item['content']?><br>                    </p><br>               </li><br>                <?php endforeach; ?><br>             </ul><br>             <?php endforeach; ?><br>             <?php else : ?><br>            <ul><br>                <?php foreach ($this->brand_rate as $_item) : ?><br>               <li><br>                    <a href="<?=$this->Url_Product($_item)?>" target="_blank"><img height="70" width="70" src="<?=$this->Logo_Product($_item, '100x100')?>"></a><br>                    <p><span class="title"><?=$_item['userparent_nickname']?></span>评论了：<br><span class="chanpin"><a href="<?=$this->Url_Product($_item)?>" target="_blank"><?=$_item['product_title']?></a></span><br><?=$_item['content']?><br>                    </p><br>               </li><br>                <?php endforeach; ?><br>             </ul><br>             <?php endif; ?><br>             <?php endif; ?><br>         </div><br><!--WizHtmlContent-->
</div>
<div><a title="Wiz，个人知识管理，PKM。" href="http://wiz.cn">通过Wiz发布</a></div>
